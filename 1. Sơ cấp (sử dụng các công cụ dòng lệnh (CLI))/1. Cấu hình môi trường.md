## **1. Mục tiêu của bài**

Bài này hướng dẫn:

* Cách thiết lập **môi trường ROS 2** trên terminal.
* Cách dùng lệnh `source` để kích hoạt môi trường.
* Giúp bạn có thể chạy các lệnh `ros2` và các node ROS 2 mà không cần cài đặt thủ công đường dẫn.

---

## **2. Tại sao phải cấu hình môi trường?**

Khi cài ROS 2, các file thực thi, thư viện và biến môi trường (environment variables) được đặt ở một số thư mục nhất định.
Nếu không **nạp (source)** các file cấu hình này, terminal sẽ **không biết** lệnh `ros2` ở đâu và không tìm được gói ROS.

Ví dụ, nếu bạn gõ:

```bash
ros2 run demo_nodes_cpp talker
```

mà chưa `source` môi trường → sẽ báo lỗi `command not found`.

---

## **3. Lệnh source trong ROS 2**

* Sau khi cài ROS 2, bạn cần:

```bash
source /opt/ros/jazzy/setup.bash
```

Câu lệnh này:

* Thêm đường dẫn ROS 2 vào biến môi trường `PATH`, `AMENT_PREFIX_PATH`, `LD_LIBRARY_PATH`, v.v.
* Giúp bạn chạy được lệnh `ros2` ở bất kỳ đâu.

---

## **4. Thiết lập tự động**

Thay vì phải `source` mỗi lần mở terminal, bạn có thể thêm vào file **\~/.bashrc**:

```bash
echo "source /opt/ros/jazzy/setup.bash" >> ~/.bashrc
```

Sau đó, mỗi lần mở terminal mới, môi trường ROS 2 sẽ tự được thiết lập.

---

## **5. Nguồn khác nhau khi có workspace**

Nếu bạn đang làm việc với workspace (ví dụ `~/ros2_ws`), sau khi build (`colcon build`), bạn cần:

```bash
source install/setup.bash
```

Lệnh này sẽ:

* Nạp cả môi trường ROS 2 mặc định.
* Cộng thêm các gói vừa build trong workspace của bạn.

**Lưu ý:** Luôn source file trong workspace **sau** khi source ROS 2 mặc định, để ROS dùng phiên bản gói mới build của bạn.

---

## **6. Tóm tắt quy trình**

1. **Chỉ dùng ROS 2 mặc định**

   ```bash
   source /opt/ros/jazzy/setup.bash
   ```

2. **Khi làm việc với workspace**

   ```bash
   source /opt/ros/jazzy/setup.bash
   source ~/ros2_ws/install/setup.bash
   ```

3. **Thiết lập tự động** (khuyên dùng)

   ```bash
   echo "source /opt/ros/jazzy/setup.bash" >> ~/.bashrc
   ```
Bạn có muốn mình vẽ luôn không?

